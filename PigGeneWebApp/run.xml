<?xml version="1.0" encoding="UTF-8" standalone="no"?> 
<project default="run_server" name="" >
    
	<property name="cloud.host" value="genepi-calc.uibk.ac.at" />
	<property name="cloud.username" value="clemens" />
	<property name="cloud.dir" value="/home/clemens/pigGeneApp" />
	<property name="pigGene.jar" value="pigGene_server.jar" />
	
	<target name="copy_file">
		<echo>copy file to genepi-calc server...</echo>
		<scp file="dist/pigGene-0.1.0.zip"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<scp file="resources/stop_server.sh"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
	</target>
	
	<target name="unzip_files" depends="copy_file"> 
		<echo>unziping file on genepi-calc server...</echo>
		<sshexec host="${cloud.host}" username="${cloud.username}" password="${cloud.password}" trust="true" command="cd ${cloud.dir}; unzip -o pigGene-0.1.0.zip"></sshexec>
	</target>
	
	<target name="run_server" depends="unzip_files">
		<echo>kill old pigGene instances...</echo>
		<sshexec host="${cloud.host}" username="${cloud.username}" password="${cloud.password}" trust="true" failonerror="false" command="cd ${cloud.dir}; sh stop_server.sh"></sshexec>
		
		<echo>starting pigGene server application</echo>
		<sshexec host="${cloud.host}" username="${cloud.username}" password="${cloud.password}" trust="true" command="cd ${cloud.dir}; java -jar pigGene_server.jar"></sshexec>
		
		<echo>application is reachable under: genepi-calc.uibk.ac.at:8080/</echo>
	</target>
		
</project>