<?xml version="1.0" encoding="UTF-8" standalone="no"?> 
<project default="copy_jar_file" name="" >
    
	<property name="cloud.host" value="192.168.71.201" />
	<property name="cloud.username" value="hadoop" />
	<property name="cloud.dir" value="/home/hadoop/cloudgene/apps/piggene" />
	<property name="local.pig" value="apps/piggene" />
	<property name="app.jar" value="pigGene.jar" />
	<property name="datafu.jar" value="datafu-0.0.9.jar" />
	<property name="seqpig.jar" value="SeqPig.jar" />
	<property name="picard.jar" value="picard-1.76.jar" />
	<property name="sam.jar" value="sam-1.76.jar" />
	<property name="bam.jar" value="hadoop-bam-5.1.jar" />
	
	<target name="compile">
    	<javac srcdir="src" destdir="bin" classpath="" target="1.6" includeantruntime="false">
			<classpath>
				<fileset dir="../PigGene-Scripts/lib" />
			</classpath>
    	</javac>   		
    </target>
	
    <target name="create_jar" depends="compile">  	
    	<delete dir="../PigGene-Scripts/dist"></delete>
    	<mkdir dir="../PigGene-Scripts/dist"></mkdir>
    	
        <jar destfile="../PigGene-Scripts/dist/${app.jar}" filesetmanifest="mergewithoutmain">
            <fileset dir="../PigGene-Scripts/bin"/>
        </jar>
    </target>
	
	<target name="copy_jar_file" depends="create_jar">
		<echo>copy pig-gene jar file...</echo>
		<scp file="../PigGene-Scripts/dist/${app.jar}"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<echo>copy data-fu jar file...</echo>
		<scp file="lib/${datafu.jar}"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<echo>copy SeqPig jar file...</echo>
		<scp file="lib/${seqpig.jar}"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<echo>copy picard jar file...</echo>
		<scp file="lib/${picard.jar}"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<echo>copy sam jar file...</echo>
		<scp file="lib/${sam.jar}"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<echo>copy bam jar file...</echo>
		<scp file="lib/${bam.jar}"  todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"></scp>
		<echo>copy yaml- and pig-files...</echo>
		<scp todir="${cloud.username}@${cloud.host}:${cloud.dir}" password="${cloud.password}" trust="true"><fileset dir="${local.pig}"></fileset></scp>
	</target>

</project>