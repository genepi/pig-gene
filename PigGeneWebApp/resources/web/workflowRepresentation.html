<div class="workflowContainer well">

	<div class="headlineContainer">
		<div contenteditable id="workflowName" ng-click="renderChangeHeadlineBtns($event)">{{workflow.name}}</div>
		<div contenteditable id="workflowDescription" ng-click="renderChangeHeadlineBtns($event)">{{workflow.description}}</div>
	</div>
	
	<div class="paramContainer" ng-if="isVisible()">
		<div class="inputParameters">
			input elements:<br>
			<div ng-repeat="input in workflow.parameter.inputParameter track by $index">
				<span class="parameterElementPrefix">$</span><input class="parameterElement" ng-model="workflow.parameter.inputParameter[$index].name"></input>
			</div>
			<button class="btn btn-xs btn-default" ng-click="addInput()"><span class="glyphicon glyphicon-plus"></span> add input</button>
		</div>
	</div>
	
	<div>
		<div ng-repeat="component in workflow.components track by $index">
			<br ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE')">
			<h4 class="refIndentation" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE')"><a ng-click="editReferencedWf(component.name)">{{component.name}}</a></h4>
			<i class="refIndentation" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE')">{{component.description}}</i><br>
			
			<div class="refParamContainer refIndentation" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE') && parametersExist(component.parameter.inputParameter)">
				input parameter mapping:
				<div ng-repeat="input in component.parameter.inputParameter track by $index">
					<span class="parameterElementPrefix">${{input.name}}</span>
					<input class="parameterElement" ng-model="workflow.parameterMapping.inputParameterMapping[component.name][input.name]"></input>
				</div>
			</div>
			 
			<div class="scriptContentBlock refIndentation" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE')">
				<textarea readonly elastic class="scriptContent componentRef" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE')" ng-click="renderOptionBtns($event,$index,'ref')" ng-model="component.components[0].content">{{component.components[0].content}}</textarea>
			</div>

			<div class="refParamContainer refIndentation" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE') && parametersExist(component.parameter.outputParameter)">
				output parameter mapping:
				<div ng-repeat="output in component.parameter.outputParameter track by $index">
					<span class="parameterElementPrefix" >${{output.name}}</span>
					<input class="parameterElement" ng-model="workflow.parameterMapping.outputParameterMapping[component.name][output.name]" ></input>
				</div>
			</div>

			<!-- 
			<div class="refParamContainer refIndentation" ng-if="checkType(component.workflowType, 'WORKFLOW_REFERENCE') && parametersExist(component.parameter.outputParameter)">
				<span ng-if="!onlyPersistedParamsExist(component.parameter.outputParameter)">output parameter mapping:</span>
				<div ng-repeat="output in component.parameter.outputParameter track by $index">
					<span class="parameterElementPrefix" ng-if="!output.persistent">${{output.name}}</span>
					<input class="parameterElement" ng-model="workflow.parameterMapping.outputParameterMapping[component.name][output.name]" ng-if="!output.persistent"></input>
				</div>
			</div>
			 -->
			
			<div class="scriptContentBlock" ng-if="checkType(component.workflowType, 'WORKFLOW_COMPONENT')">
				<textarea elastic class="scriptContent component" ng-if="checkType(component.workflowType, 'WORKFLOW_COMPONENT')" ng-click="renderOptionBtns($event,$index,'std')" ng-model="component.content">{{component.content}}</textarea>
			</div>
		</div>
		
		<div class="paramContainer" ng-if="isVisible()">
			<div class="outputParameters">
				output elements:<br>
				<div ng-repeat="output in workflow.parameter.outputParameter track by $index">
					<span class="parameterElementPrefix">$</span><input class="parameterElement" ng-model="workflow.parameter.outputParameter[$index].name"></input>
					persistent: <input type="checkbox" ng-model="workflow.parameter.outputParameter[$index].persistent">
				</div>
				<button class="btn btn-xs btn-default" ng-click="addOutput()"><span class="glyphicon glyphicon-plus"></span> add output</button>
			</div>
		</div>
		<br>
		<br>
		
		<button class="btn btn-sm btn-success" ng-click="addNewComponent()"><span class="glyphicon glyphicon-plus"></span> add new component</button>
		<button class="btn btn-sm btn-warning" ng-click="addExistingComponent()"><span class="glyphicon glyphicon-plus"></span> add existing component</button>
	</div>
	<br>
	
</div>